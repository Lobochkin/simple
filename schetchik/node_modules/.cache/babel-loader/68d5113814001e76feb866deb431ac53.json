{"remainingRequest":"D:\\sites\\simple\\schetchik\\node_modules\\babel-loader\\lib\\index.js!D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\sites\\simple\\schetchik\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\sites\\simple\\schetchik\\src\\components\\tfootAddRow.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\sites\\simple\\schetchik\\src\\components\\tfootAddRow.vue","mtime":1600438863978},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd0Zm9vdEFkZFJvdycsCiAgcHJvcHM6IFsnbWV0ZXJzJywgJ3ByaWNlJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkZE1ldGVyczogewogICAgICAgIGFjdGlvbjogJ2FkZCcsCiAgICAgICAgZGF0ZTogJycsCiAgICAgICAgZWxlY3RyaWM6ICcnLAogICAgICAgIGhvdF93YXRlcjogJycsCiAgICAgICAgY29sZF93YXRlcjogJycsCiAgICAgICAgdG90YWw6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgbWV0ZXJzOiBmdW5jdGlvbiBtZXRlcnMoKSB7CiAgICAgIHRoaXMuYWRkTWV0ZXJzID0gewogICAgICAgIGFjdGlvbjogJ2FkZCcsCiAgICAgICAgZGF0ZTogJycsCiAgICAgICAgZWxlY3RyaWM6ICcnLAogICAgICAgIGhvdF93YXRlcjogJycsCiAgICAgICAgY29sZF93YXRlcjogJycsCiAgICAgICAgdG90YWw6ICcnCiAgICAgIH07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRNZXRlcnM6IGZ1bmN0aW9uIHNldE1ldGVycygpIHsKICAgICAgaWYgKCF0aGlzLmFkZE1ldGVycy50b3RhbCkgewogICAgICAgIHRoaXMuY2FsY3VsYXRlKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFkZE1ldGVycy50b3RhbCkgewogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWRkTWV0ZXJzKTsKICAgICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5hZGRNZXRlcnMpIHsKICAgICAgICAgIGRhdGEuYXBwZW5kKGtleSwgdGhpcy5hZGRNZXRlcnNba2V5XSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRlbWl0KCdhZGQtcm93JywgZGF0YSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRBbW91bnQ6IGZ1bmN0aW9uIGdldEFtb3VudChkYXRhLCBvbGREYXRhKSB7CiAgICAgIHZhciBhbW91bnQgPSBNYXRoLnJvdW5kKChkYXRhLmhvdF93YXRlciAtIG9sZERhdGEuaG90X3dhdGVyKSAqIHRoaXMucHJpY2Uud2FybWluZyArIChkYXRhLmhvdF93YXRlciAtIG9sZERhdGEuaG90X3dhdGVyICsgKGRhdGEuY29sZF93YXRlciAtIG9sZERhdGEuY29sZF93YXRlcikpICogdGhpcy5wcmljZS53YXRlciArIChkYXRhLmVsZWN0cmljIC0gb2xkRGF0YS5lbGVjdHJpYykgKiB0aGlzLnByaWNlLmVsZWN0cmljKSArICfRgNGD0LEuJzsKICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0sCiAgICBjYWxjdWxhdGU6IGZ1bmN0aW9uIGNhbGN1bGF0ZSgpIHsKICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmFkZE1ldGVycykgewogICAgICAgIGlmIChpID09PSAndG90YWwnKSBjb250aW51ZTsKCiAgICAgICAgaWYgKCF0aGlzLmFkZE1ldGVyc1tpXSkgewogICAgICAgICAgYWxlcnQoJ9Cd0YPQttC90L4g0LfQsNC/0L7Qu9C90LjRgtGMINCy0YHQtSDQv9C+0LvRjycpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hZGRNZXRlcnMudG90YWwgPSB0aGlzLmdldEFtb3VudCh0aGlzLmFkZE1ldGVycywgdGhpcy5tZXRlcnNbdGhpcy5tZXRlcnMubGVuZ3RoIC0gMV0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["tfootAddRow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA,CAAA,QAAA,EAAA,OAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,SAAA,EAAA,EAJA;AAKA,QAAA,UAAA,EAAA,EALA;AAMA,QAAA,KAAA,EAAA;AANA;AADA,KAAA;AAUA,GAdA;AAeA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA,kBAAA;AACA,WAAA,SAAA,GAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,SAAA,EAAA,EAJA;AAKA,QAAA,UAAA,EAAA,EALA;AAMA,QAAA,KAAA,EAAA;AANA,OAAA;AAQA;AAVA,GAfA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,UAAA,CAAA,KAAA,SAAA,CAAA,KAAA,EAAA;AACA,aAAA,SAAA;AACA;;AACA,UAAA,KAAA,SAAA,CAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,SAAA;AACA,YAAA,IAAA,GAAA,IAAA,QAAA,EAAA;;AACA,aAAA,IAAA,GAAA,IAAA,KAAA,SAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,CAAA,GAAA,EAAA,KAAA,SAAA,CAAA,GAAA,CAAA;AACA;;AACA,aAAA,KAAA,CAAA,SAAA,EAAA,IAAA;AACA;AACA,KAbA;AAcA,IAAA,SAdA,qBAcA,IAdA,EAcA,OAdA,EAcA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,KAAA,CAAA,CAAA,IAAA,CAAA,SAAA,GAAA,OAAA,CAAA,SAAA,IAAA,KAAA,KAAA,CAAA,OAAA,GAAA,CAAA,IAAA,CAAA,SAAA,GAAA,OAAA,CAAA,SAAA,IAAA,IAAA,CAAA,UAAA,GAAA,OAAA,CAAA,UAAA,CAAA,IAAA,KAAA,KAAA,CAAA,KAAA,GACA,CAAA,IAAA,CAAA,QAAA,GAAA,OAAA,CAAA,QAAA,IAAA,KAAA,KAAA,CAAA,QADA,IACA,MADA;AAEA,aAAA,MAAA;AACA,KAlBA;AAmBA,IAAA,SAnBA,uBAmBA;AACA,WAAA,IAAA,CAAA,IAAA,KAAA,SAAA,EAAA;AACA,YAAA,CAAA,KAAA,OAAA,EAAA;;AACA,YAAA,CAAA,KAAA,SAAA,CAAA,CAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,0BAAA,CAAA;AACA,iBAAA,KAAA;AACA;AACA;;AACA,WAAA,SAAA,CAAA,KAAA,GAAA,KAAA,SAAA,CAAA,KAAA,SAAA,EAAA,KAAA,MAAA,CAAA,KAAA,MAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA;AACA;AA5BA;AA3BA,CAAA","sourcesContent":["<template>\n    <tfoot>\n    <tr>\n        <td class=\"p-sm-3\">\n            <input class=\"form__input form__input-date\" type=\"date\" name=\"date\" v-model=\"addMeters.date\" autofocus>\n        </td>\n        <td class=\"p-sm-3\">\n            <input class=\"form__input form__input-electric\" type=\"number\" name=\"electric\" v-model=\"addMeters.electric\" maxlength=\"30\" required>\n        </td>\n        <td class=\"p-sm-3\">\n            <input class=\"form__input form__input-hot_water\" type=\"number\" name=\"hot_water\" v-model=\"addMeters.hot_water\" maxl=\"10000000\" required>\n        </td>\n        <td class=\"p-sm-3\">\n            <input class=\"form__input form__input-cold_water\" type=\"number\" name=\"cold_water\" v-model=\"addMeters.cold_water\" maxl=\"1000000\" required>\n        </td>\n        <td class=\"p-sm-3\">\n            <span class=\"total\">{{addMeters.total}}</span>\n        </td>\n        <td class=\"p-sm-3\">\n            <button @click=\"calculate\">\n                <i class=\"fa fa-calculator\"></i>\n            </button>\n            <button class=\"form__button_add\" name=\"button_add\" type=\"submit\" @click=\"setMeters\"><i class=\"fa fa-cloud-upload\"></i></button>\n        </td>\n    </tr>\n    </tfoot>\n</template>\n\n<script>\n    export default {\n        name: 'tfootAddRow',\n        props: ['meters', 'price'],\n        data() {\n            return {\n                addMeters: {\n                    action: 'add',\n                    date: '',\n                    electric: '',\n                    hot_water: '',\n                    cold_water: '',\n                    total: ''\n                }\n            };\n        },\n        watch: {\n            meters: function() {\n                this.addMeters = {\n                    action: 'add',\n                    date: '',\n                    electric: '',\n                    hot_water: '',\n                    cold_water: '',\n                    total: ''\n                };\n            },\n        },\n        methods: {\n            setMeters() {\n                if (!this.addMeters.total) {\n                    this.calculate();\n                }\n                if (this.addMeters.total) {\n                    console.log(this.addMeters);\n                    let data = new FormData();\n                    for (let key in this.addMeters) {\n                        data.append(key, this.addMeters[key]);\n                    }\n                    this.$emit('add-row',data);\n                }\n            },\n            getAmount(data, oldData) {\n                let amount = Math.round((data.hot_water - oldData.hot_water) * this.price.warming + ((data.hot_water - oldData.hot_water) + (data.cold_water - oldData.cold_water)) * this.price.water +\n                    (data.electric - oldData.electric) * this.price.electric) + 'руб.';\n                return amount;\n            },\n            calculate() {\n                for (let i in this.addMeters) {\n                    if (i === 'total') continue;\n                    if (!this.addMeters[i]) {\n                        alert('Нужно заполнить все поля');\n                        return false;\n                    }\n                }\n                this.addMeters.total = this.getAmount(this.addMeters, this.meters[this.meters.length - 1]);\n            }\n        }\n    };\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components"}]}