{"remainingRequest":"D:\\sites\\simple\\schetchik\\node_modules\\babel-loader\\lib\\index.js!D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\sites\\simple\\schetchik\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\sites\\simple\\schetchik\\src\\components\\TableData.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\sites\\simple\\schetchik\\src\\components\\TableData.vue","mtime":1600438733683},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFRhYmxlQm9keUNvdW50IGZyb20gJy4vVGFibGVCb2R5Q291bnQudnVlJzsKaW1wb3J0IHRmb290QWRkUm93IGZyb20gJy4vdGZvb3RBZGRSb3cudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdUYWJsZURhdGEnLAogIGNvbXBvbmVudHM6IHsKICAgIFRhYmxlQm9keUNvdW50OiBUYWJsZUJvZHlDb3VudCwKICAgIHRmb290QWRkUm93OiB0Zm9vdEFkZFJvdwogIH0sCiAgcHJvcHM6IFsnaXNBZG1pbicsICdwcmljZSddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXRlcnM6IFt7fV0sCiAgICAgIHVybDogewogICAgICAgIG1ldGVyczogJ2h0dHA6Ly9sb2JvY2hraW4ucnUvbG9jYWwvdG9vbHMvYWpheC12dWUucGhwJwogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5heGlvcy5wb3N0KHRoaXMudXJsLm1ldGVycykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMubWV0ZXJzID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRSb3c6IGZ1bmN0aW9uIGFkZFJvdyhvYmopIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmF4aW9zLnBvc3QodGhpcy51cmwubWV0ZXJzLCBvYmopLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgX3RoaXMyLm1ldGVycyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVJvdzogZnVuY3Rpb24gZGVsZXRlUm93KGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmlzQWRtaW4pIHsKICAgICAgICBhbGVydCgn0KPQtNCw0LvRj9GC0Ywg0LTQsNC90L3Ri9C1INC80L7QttC10YIg0YLQvtC70YzQutC+INCw0LTQvNC40L3QuNGB0YLRgNCw0YLQvtGAIScpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgdmFyIGFjdGlvbiA9ICdkZWxldGVfQWRtaW4nOwogICAgICBkYXRhLmFwcGVuZCgnYWN0aW9uJywgYWN0aW9uKTsKICAgICAgZGF0YS5hcHBlbmQoJ2lkJywgaWQpOwogICAgICB0aGlzLmF4aW9zLnBvc3QodGhpcy51cmwubWV0ZXJzLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5tZXRlcnMgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBlZGl0Um93OiBmdW5jdGlvbiBlZGl0Um93KG9iaiwgaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmF4aW9zLnBvc3QodGhpcy51cmwubWV0ZXJzLCBvYmopLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0Lm1ldGVycyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXM0Lm1ldGVyc1tpbmRleF0uaXNVcGRhdGUgPSAndHJ1ZSc7CiAgICAgICAgY29uc29sZS5sb2coaW5kZXgpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM0LiRkZWxldGUoX3RoaXM0Lm1ldGVyc1tpbmRleF0sICdpc1VwZGF0ZScpOwogICAgICAgIH0sIDMwMDAsIGluZGV4KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["TableData.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAmBA,OAAA,cAAA,MAAA,sBAAA;AACA,OAAA,WAAA,MAAA,mBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA,cADA;AAEA,IAAA,WAAA,EAAA;AAFA,GAFA;AAMA,EAAA,KAAA,EAAA,CAAA,SAAA,EAAA,OAAA,CANA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,CAAA,EAAA,CADA;AAEA,MAAA,GAAA,EAAA;AACA,QAAA,MAAA,EAAA;AADA;AAFA,KAAA;AAMA,GAdA;AAeA,EAAA,OAfA,qBAeA;AAAA;;AACA,SAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,CAAA,MAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,IAAA;AACA,KAFA,EAGA,KAHA,CAGA,UAAA,KAAA;AAAA,aAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA;AAAA,KAHA;AAIA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,GADA,EACA;AAAA;;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,CAAA,MAAA,EAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAHA;AAIA,KANA;AAOA,IAAA,SAPA,qBAOA,EAPA,EAOA;AAAA;;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,QAAA,KAAA,CAAA,4CAAA,CAAA;AACA,eAAA,KAAA;AACA;;AACA,UAAA,IAAA,GAAA,IAAA,QAAA,EAAA;AACA,UAAA,MAAA,GAAA,cAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,QAAA,EAAA,MAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,IAAA,EAAA,EAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,CAAA,MAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAFA;AAGA,KAnBA;AAoBA,IAAA,OApBA,mBAoBA,GApBA,EAoBA,KApBA,EAoBA;AAAA;;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,CAAA,MAAA,EAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,KAAA,EAAA,QAAA,GAAA,MAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,UAAA,CAAA,YAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,EAAA,UAAA;AACA,SAFA,EAEA,IAFA,EAEA,KAFA,CAAA;AAGA,OAPA;AAQA;AA7BA;AArBA,CAAA","sourcesContent":["<template>\n    <div class=\"fresh-table row justify-content-center\">\n        <table id=\"fresh-table\" class=\"table\">\n            <thead>\n            <th class=\"p-sm-3\" data-field=\"id\">Дата:</th>\n            <th class=\"p-sm-3\" data-field=\"name\">Элек.:</th>\n            <th class=\"p-sm-3\" data-field=\"salary\">Гор. вода:</th>\n            <th class=\"p-sm-3\" data-field=\"country\">Хол. вода:</th>\n            <th class=\"p-sm-3\" data-field=\"city\">Сумма:</th>\n            <th class=\"p-sm-3\" data-field=\"actions\">Actions</th>\n            </thead>\n            <TableBodyCount :meters=\"meters\" :isAdmin=\"isAdmin\" :price=\"price\" @delete-date=\"deleteRow\" @edit-meters=\"editRow\"/>\n            <tfootAddRow :meters=\"meters\" :price=\"price\" @add-row=\"addRow\"/>\n        </table>\n    </div>\n</template>\n\n<script>\n\n    import TableBodyCount from './TableBodyCount.vue';\n    import tfootAddRow from './tfootAddRow.vue';\n\n    export default {\n        name: 'TableData',\n        components: {\n            TableBodyCount,\n            tfootAddRow\n        },\n        props: ['isAdmin','price'],\n        data(){\n            return {\n                meters: [{}],\n                url: {\n                    meters: 'http://lobochkin.ru/local/tools/ajax-vue.php'\n                }\n            }\n        },\n        created() {\n            this.axios.post(this.url.meters).then((response) => {\n                this.meters = response.data;\n            })\n            .catch(error => console.log(error));\n        },\n        methods: {\n            addRow(obj){\n                this.axios.post(this.url.meters, obj).then((response) => {\n                    console.log(response.data);\n                    this.meters = response.data;\n                });\n            },\n            deleteRow(id) {\n                if (!this.isAdmin) {\n                    alert('Удалять данные может только администратор!');\n                    return false;\n                }\n                let data = new FormData();\n                let action = 'delete_Admin';\n                data.append('action', action);\n                data.append('id', id);\n                this.axios.post(this.url.meters, data).then((response) => {\n                    this.meters = response.data;\n                });\n            },\n            editRow(obj,index) {\n                this.axios.post(this.url.meters, obj).then((response) => {\n                    this.meters = response.data;\n                    this.meters[index].isUpdate = 'true';\n                    console.log(index);\n                    setTimeout(() => {\n                        this.$delete(this.meters[index], 'isUpdate');\n                    }, 3000,index);\n                });\n            }\n        }\n\n    };\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components"}]}