{"remainingRequest":"D:\\sites\\simple\\schetchik\\node_modules\\thread-loader\\dist\\cjs.js!D:\\sites\\simple\\schetchik\\node_modules\\babel-loader\\lib\\index.js!D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\sites\\simple\\schetchik\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\sites\\simple\\schetchik\\src\\components\\TableBodyCount.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\sites\\simple\\schetchik\\src\\components\\TableBodyCount.vue","mtime":1600439155843},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdUYWJsZUJvZHlDb3VudCcsCiAgcHJvcHM6IFsnbWV0ZXJzJywgJ2lzQWRtaW4nLCAncHJpY2UnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIGdldEFtb3VudDogZnVuY3Rpb24gZ2V0QW1vdW50KGRhdGEsIG9sZERhdGEpIHsKICAgICAgdmFyIGFtb3VudCA9IE1hdGgucm91bmQoKGRhdGEuaG90X3dhdGVyIC0gb2xkRGF0YS5ob3Rfd2F0ZXIpICogdGhpcy5wcmljZS53YXJtaW5nICsgKGRhdGEuaG90X3dhdGVyIC0gb2xkRGF0YS5ob3Rfd2F0ZXIgKyAoZGF0YS5jb2xkX3dhdGVyIC0gb2xkRGF0YS5jb2xkX3dhdGVyKSkgKiB0aGlzLnByaWNlLndhdGVyICsgKGRhdGEuZWxlY3RyaWMgLSBvbGREYXRhLmVsZWN0cmljKSAqIHRoaXMucHJpY2UuZWxlY3RyaWMpICsgJ9GA0YPQsS4nOwogICAgICByZXR1cm4gYW1vdW50OwogICAgfSwKICAgIGNhbGN1bGF0ZTogZnVuY3Rpb24gY2FsY3VsYXRlKGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5kZXggPT09ICdudW1iZXInKSB7CiAgICAgICAgdGhpcy5jaGVja0lzRW1wdHUoaW5kZXgpOwogICAgICAgIHRoaXMubWV0ZXJzW2luZGV4XS50b3RhbCA9IHRoaXMuZ2V0QW1vdW50KHRoaXMubWV0ZXJzW2luZGV4XSwgdGhpcy5tZXRlcnNbaW5kZXggLSAxXSk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVEYXRlOiBmdW5jdGlvbiBkZWxldGVEYXRlKGlkKSB7CiAgICAgIGlmICghdGhpcy5pc0FkbWluKSB7CiAgICAgICAgYWxlcnQoJ9Cj0LTQsNC70Y/RgtGMINC00LDQvdC90YvQtSDQvNC+0LbQtdGCINGC0L7Qu9GM0LrQviDQsNC00LzQuNC90LjRgdGC0YDQsNGC0L7RgCEnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ2RlbGV0ZS1kYXRlJywgaWQpOwogICAgfSwKICAgIGNoZWNrSXNFbXB0dTogZnVuY3Rpb24gY2hlY2tJc0VtcHR1KGluZGV4KSB7CiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tZXRlcnNbaW5kZXhdKSB7CiAgICAgICAgaWYgKGkgPT09ICd0b3RhbCcpIGNvbnRpbnVlOwoKICAgICAgICBpZiAoIXRoaXMubWV0ZXJzW2luZGV4XVtpXSkgewogICAgICAgICAgYWxlcnQoJ9Cd0YPQttC90L4g0LfQsNC/0L7Qu9C90LjRgtGMINCy0YHQtSDQv9C+0LvRjycpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGVkaXRNZXRlcnM6IGZ1bmN0aW9uIGVkaXRNZXRlcnMoaW5kZXgpIHsKICAgICAgaWYgKCF0aGlzLmlzQWRtaW4pIHsKICAgICAgICBhbGVydCgn0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0LTQsNC90L3Ri9C1INC80L7QttC10YIg0YLQvtC70YzQutC+INCw0LTQvNC40L3QuNGB0YLRgNCw0YLQvtGAIScpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5jaGVja0lzRW1wdHUoaW5kZXgpOwogICAgICB2YXIgYWN0aW9uID0gJ2FjdGlvbi1lZGl0X19hZG1pbic7CiAgICAgIHRoaXMuY2FsY3VsYXRlKGluZGV4KTsKICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLm1ldGVyc1tpbmRleF0pIHsKICAgICAgICBkYXRhLmFwcGVuZChrZXksIHRoaXMubWV0ZXJzW2luZGV4XVtrZXldKTsKICAgICAgfQoKICAgICAgZGF0YS5hcHBlbmQoJ2FjdGlvbicsIGFjdGlvbik7CiAgICAgIHRoaXMuJGVtaXQoJ2VkaXQtbWV0ZXJzJywgZGF0YSwgaW5kZXgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["TableBodyCount.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,KAAA,EAAA,CAAA,QAAA,EAAA,SAAA,EAAA,OAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA,EAAA;AAGA,GAPA;AAQA,EAAA,OAAA,EAAA,mBAAA,CAEA,CAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,IADA,EACA,OADA,EACA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,KAAA,CAAA,CAAA,IAAA,CAAA,SAAA,GAAA,OAAA,CAAA,SAAA,IAAA,KAAA,KAAA,CAAA,OAAA,GAAA,CAAA,IAAA,CAAA,SAAA,GAAA,OAAA,CAAA,SAAA,IAAA,IAAA,CAAA,UAAA,GAAA,OAAA,CAAA,UAAA,CAAA,IAAA,KAAA,KAAA,CAAA,KAAA,GACA,CAAA,IAAA,CAAA,QAAA,GAAA,OAAA,CAAA,QAAA,IAAA,KAAA,KAAA,CAAA,QADA,IACA,MADA;AAEA,aAAA,MAAA;AACA,KALA;AAMA,IAAA,SANA,qBAMA,KANA,EAMA;AACA,UAAA,KAAA,KAAA,CAAA,EAAA;AACA,eAAA,KAAA;AACA,OAFA,MAEA,IAAA,OAAA,KAAA,KAAA,QAAA,EAAA;AACA,aAAA,YAAA,CAAA,KAAA;AACA,aAAA,MAAA,CAAA,KAAA,EAAA,KAAA,GAAA,KAAA,SAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA,KAAA,MAAA,CAAA,KAAA,GAAA,CAAA,CAAA,CAAA;AACA;AACA,KAbA;AAcA,IAAA,UAdA,sBAcA,EAdA,EAcA;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,QAAA,KAAA,CAAA,4CAAA,CAAA;AACA,eAAA,KAAA;AACA;;AACA,WAAA,KAAA,CAAA,aAAA,EAAA,EAAA;AACA,KApBA;AAqBA,IAAA,YArBA,wBAqBA,KArBA,EAqBA;AACA,WAAA,IAAA,CAAA,IAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA;AACA,YAAA,CAAA,KAAA,OAAA,EAAA;;AACA,YAAA,CAAA,KAAA,MAAA,CAAA,KAAA,EAAA,CAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,0BAAA,CAAA;AACA,iBAAA,KAAA;AACA;AACA;AACA,KA7BA;AA8BA,IAAA,UA9BA,sBA8BA,KA9BA,EA8BA;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,QAAA,KAAA,CAAA,kDAAA,CAAA;AACA,eAAA,KAAA;AACA;;AACA,WAAA,YAAA,CAAA,KAAA;AACA,UAAA,MAAA,GAAA,oBAAA;AACA,WAAA,SAAA,CAAA,KAAA;AACA,UAAA,IAAA,GAAA,IAAA,QAAA,EAAA;;AACA,WAAA,IAAA,GAAA,IAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA;AACA,QAAA,IAAA,CAAA,MAAA,CAAA,GAAA,EAAA,KAAA,MAAA,CAAA,KAAA,EAAA,GAAA,CAAA;AACA;;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,QAAA,EAAA,MAAA;AACA,WAAA,KAAA,CAAA,aAAA,EAAA,IAAA,EAAA,KAAA;AACA;AA5CA;AAXA,CAAA","sourcesContent":["<template>\n    <tbody class=\"table-count\">\n        <tr v-for=\"(meter, index) in meters\" :key=\"index\" :class=\"[(typeof meter.isUpdate === 'undefined' )?'': meter.isUpdate == 'true'?'update':'']\">\n            <td class=\"p-sm-3\">\n                <input class=\"form__input\" type=\"date\" name=\"date\" data-id=\"\" v-model=\"meter.date\" required>\n            </td>\n            <td class=\"p-sm-3\">\n                <input class=\"form__input\" type=\"number\" name=\"electric\" data-id=\"\" v-model=\"meter.electric\" maxlength=\"30\" required>\n            </td>\n            <td class=\"p-sm-3\">\n                <input class=\"form__input\" type=\"number\" name=\"hot_water\" data-id=\"\" v-model=\"meter.hot_water\" maxl=\"10000000\" required>\n            </td>\n            <td class=\"p-sm-3\">\n                <input class=\"form__input\" type=\"number\" name=\"cold_water\" data-id=\"\" v-model=\"meter.cold_water\" maxl=\"1000000\" required>\n            </td>\n            <td class=\"p-sm-3\">\n                <input class=\"form__input\" type=\"text\" name=\"total\" data-id=\"\" v-model=\"meter.total\" maxl=\"1000000\" required>\n            </td>\n            <td class=\"p-sm-3\">\n                <button title=\"calculator\" class=\"table-action calculator\" name=\"button\" :data-id=\"meter.id\"\n                        @click=\"calculate(index)\">\n                    <i class=\"fa fa-calculator\"></i>\n                </button>\n                <button class=\"form__button table-action edit\" title=\"Edit\" name=\"button_edit\" :data-id=\"meter.id\"\n                        @click=\"editMeters(index)\" type=\"submit\">\n                    <i class=\"fa fa-edit\"></i>\n                </button>\n                <span title=\"Remove\" class=\"table-action remove\" :data-id=\"meter.id\" @click=\"deleteDate(meter.id)\">\n                                    <i class=\"fa fa-remove\"></i>\n                                </span>\n                <span v-if=\"meter.isUpdate\" class=\"update\"><span>&#10004;</span></span>\n            </td>\n        </tr>\n    </tbody>\n</template>\n\n<script>\n    export default {\n        name: 'TableBodyCount',\n        props: ['meters','isAdmin','price'],\n        data(){\n            return {\n\n            }\n        },\n        created: function() {\n\n        },\n        methods: {\n            getAmount(data, oldData) {\n                let amount = Math.round((data.hot_water - oldData.hot_water) * this.price.warming + ((data.hot_water - oldData.hot_water) + (data.cold_water - oldData.cold_water)) * this.price.water +\n                    (data.electric - oldData.electric) * this.price.electric) + 'руб.';\n                return amount;\n            },\n            calculate(index) {\n                if (index === 0) {\n                    return false;\n                } else if (typeof index === 'number') {\n                    this.checkIsEmptu(index);\n                    this.meters[index].total = this.getAmount(this.meters[index], this.meters[index - 1]);\n                }\n            },\n            deleteDate(id) {\n                if (!this.isAdmin) {\n                    alert('Удалять данные может только администратор!');\n                    return false;\n                }\n                this.$emit('delete-date',id);\n            },\n            checkIsEmptu(index) {\n                for (let i in this.meters[index]) {\n                    if (i === 'total') continue;\n                    if (!this.meters[index][i]) {\n                        alert('Нужно заполнить все поля');\n                        return false;\n                    }\n                }\n            },\n            editMeters(index) {\n                if (!this.isAdmin) {\n                    alert('Редактировать данные может только администратор!');\n                    return false;\n                }\n                this.checkIsEmptu(index);\n                let action = 'action-edit__admin';\n                this.calculate(index);\n                let data = new FormData();\n                for (let key in this.meters[index]) {\n                    data.append(key, this.meters[index][key]);\n                }\n                data.append('action', action);\n                this.$emit('edit-meters',data,index);\n            },\n\n        }\n    };\n\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components"}]}