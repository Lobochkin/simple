{"remainingRequest":"D:\\sites\\simple\\schetchik\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\sites\\simple\\schetchik\\src\\components\\TableData.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\sites\\simple\\schetchik\\src\\components\\TableData.vue","mtime":1600438733683},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sites\\simple\\schetchik\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVGFibGVCb2R5Q291bnQgZnJvbSAnLi9UYWJsZUJvZHlDb3VudC52dWUnOwppbXBvcnQgdGZvb3RBZGRSb3cgZnJvbSAnLi90Zm9vdEFkZFJvdy52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1RhYmxlRGF0YScsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgVGFibGVCb2R5Q291bnQsCiAgICAgICAgdGZvb3RBZGRSb3cKICAgIH0sCiAgICBwcm9wczogWydpc0FkbWluJywncHJpY2UnXSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtZXRlcnM6IFt7fV0sCiAgICAgICAgICAgIHVybDogewogICAgICAgICAgICAgICAgbWV0ZXJzOiAnaHR0cDovL2xvYm9jaGtpbi5ydS9sb2NhbC90b29scy9hamF4LXZ1ZS5waHAnCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QodGhpcy51cmwubWV0ZXJzKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLm1ldGVycyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYWRkUm93KG9iail7CiAgICAgICAgICAgIHRoaXMuYXhpb3MucG9zdCh0aGlzLnVybC5tZXRlcnMsIG9iaikudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgdGhpcy5tZXRlcnMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGRlbGV0ZVJvdyhpZCkgewogICAgICAgICAgICBpZiAoIXRoaXMuaXNBZG1pbikgewogICAgICAgICAgICAgICAgYWxlcnQoJ9Cj0LTQsNC70Y/RgtGMINC00LDQvdC90YvQtSDQvNC+0LbQtdGCINGC0L7Qu9GM0LrQviDQsNC00LzQuNC90LjRgdGC0YDQsNGC0L7RgCEnKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICBsZXQgYWN0aW9uID0gJ2RlbGV0ZV9BZG1pbic7CiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdhY3Rpb24nLCBhY3Rpb24pOwogICAgICAgICAgICBkYXRhLmFwcGVuZCgnaWQnLCBpZCk7CiAgICAgICAgICAgIHRoaXMuYXhpb3MucG9zdCh0aGlzLnVybC5tZXRlcnMsIGRhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm1ldGVycyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZWRpdFJvdyhvYmosaW5kZXgpIHsKICAgICAgICAgICAgdGhpcy5heGlvcy5wb3N0KHRoaXMudXJsLm1ldGVycywgb2JqKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5tZXRlcnMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgdGhpcy5tZXRlcnNbaW5kZXhdLmlzVXBkYXRlID0gJ3RydWUnOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coaW5kZXgpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMubWV0ZXJzW2luZGV4XSwgJ2lzVXBkYXRlJyk7CiAgICAgICAgICAgICAgICB9LCAzMDAwLGluZGV4KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKfTsK"},{"version":3,"sources":["TableData.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"TableData.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"fresh-table row justify-content-center\">\n        <table id=\"fresh-table\" class=\"table\">\n            <thead>\n            <th class=\"p-sm-3\" data-field=\"id\">Дата:</th>\n            <th class=\"p-sm-3\" data-field=\"name\">Элек.:</th>\n            <th class=\"p-sm-3\" data-field=\"salary\">Гор. вода:</th>\n            <th class=\"p-sm-3\" data-field=\"country\">Хол. вода:</th>\n            <th class=\"p-sm-3\" data-field=\"city\">Сумма:</th>\n            <th class=\"p-sm-3\" data-field=\"actions\">Actions</th>\n            </thead>\n            <TableBodyCount :meters=\"meters\" :isAdmin=\"isAdmin\" :price=\"price\" @delete-date=\"deleteRow\" @edit-meters=\"editRow\"/>\n            <tfootAddRow :meters=\"meters\" :price=\"price\" @add-row=\"addRow\"/>\n        </table>\n    </div>\n</template>\n\n<script>\n\n    import TableBodyCount from './TableBodyCount.vue';\n    import tfootAddRow from './tfootAddRow.vue';\n\n    export default {\n        name: 'TableData',\n        components: {\n            TableBodyCount,\n            tfootAddRow\n        },\n        props: ['isAdmin','price'],\n        data(){\n            return {\n                meters: [{}],\n                url: {\n                    meters: 'http://lobochkin.ru/local/tools/ajax-vue.php'\n                }\n            }\n        },\n        created() {\n            this.axios.post(this.url.meters).then((response) => {\n                this.meters = response.data;\n            })\n            .catch(error => console.log(error));\n        },\n        methods: {\n            addRow(obj){\n                this.axios.post(this.url.meters, obj).then((response) => {\n                    console.log(response.data);\n                    this.meters = response.data;\n                });\n            },\n            deleteRow(id) {\n                if (!this.isAdmin) {\n                    alert('Удалять данные может только администратор!');\n                    return false;\n                }\n                let data = new FormData();\n                let action = 'delete_Admin';\n                data.append('action', action);\n                data.append('id', id);\n                this.axios.post(this.url.meters, data).then((response) => {\n                    this.meters = response.data;\n                });\n            },\n            editRow(obj,index) {\n                this.axios.post(this.url.meters, obj).then((response) => {\n                    this.meters = response.data;\n                    this.meters[index].isUpdate = 'true';\n                    console.log(index);\n                    setTimeout(() => {\n                        this.$delete(this.meters[index], 'isUpdate');\n                    }, 3000,index);\n                });\n            }\n        }\n\n    };\n</script>\n\n<style scoped>\n\n</style>"]}]}